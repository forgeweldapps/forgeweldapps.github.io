<!DOCTYPE html>
<html>

<body onload="getURIandUpdatetext()">

    <h2>Kanban Card Desktop Scan Page</h2>

    <p id="printed-uri-value"></p>

    <script>
        function getURIandUpdatetext() {
            var uriValue;
            var taskUri;
            var docuUri;
            var optaskUri;
            var projUri;
            var uriInputPrompt = prompt("Scan Kanban Card Here:", "");

            if (uriInputPrompt == null || uriInputPrompt == "") {
                uriValue = "User cancelled the prompt.";
            } else {

                uriValue = uriInputPrompt;
                projUri = /^workfront...PROJ.ID./.test(uriValue);
                taskUri = /^workfront...TASK.ID./.test(uriValue);
                docuUri = /^workfront...DOCU.ID./.test(uriValue);
                optaskUri = /^workfront...OPTASK.ID./.test(uriValue);
            }

            /* example scan input: workfront://PROJ?ID=564f71b200d4b8f4a393335ed5a816c1   */

            if (projUri == true) {
                window.open(uriValue.replace(/^workfront...PROJ.ID./, "https://samaritan.my.workfront.com/project/view?ID="));
            }
            if (taskUri == true) {
                window.open(uriValue.replace(/^workfront...TASK.ID./, "https://samaritan.my.workfront.com/task/view?ID="));
            }
            if (docuUri == true) {
                window.open(uriValue.replace(/^workfront...DOCU.ID./, "https://samaritan.my.workfront.com/document/view?ID="));
            }
            if (optaskUri == true) {
                window.open(uriValue.replace(/^workfront...OPTASK.ID./, "https://samaritan.my.workfront.com/issue/view?ID="));
            }
            
            location.reload(true);
            
        }
    </script>

</body>

</html>
